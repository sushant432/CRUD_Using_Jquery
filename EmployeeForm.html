<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <script src="code.jquery.com_jquery-3.7.1.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            Show();
        });

        function Insert() {
            $.ajax({
                url: 'Employee.aspx/EmployeeInsert',
                type: 'Post',
                contentType: 'application/Json;charset=utf-8',
                dataType: 'Json',
                data: "{Name: '" + $("#txtname").val() + "',Address: '" + $("#txtaddress").val() + "',Age: '" + $("#txtage").val() + "'}",
                success: function () {
                    Show();
                },
                error: function () {
                    alert('Something Wrong');
                }
            });
        }

        function Show() {
            $.ajax({
                url: 'EmployeeForm.asmx/EmployeeShow',
                type: 'Post',
                contentType: 'application/Json;charset=utf-8',
                dataType: 'Json',
                data: "{}",
                success: function (Jdata) {
                    Jdata = JSON.parse(Jdata.d);
                    $("#tbl").find("tr:gt(0)").remove();
                    for (var i = 0; i < Jdata.length; i++) {
                        $("#tbl").append('<tr><td>' + Jdata[i].Emp_id + '</td> <td>' + Jdata[i].Name + '</td> <td>' + Jdata[i].Address + '</td> <td>' + Jdata[i].age + '</td> <td><input type="button" id="btndelete" value="Delete"  onclick="Delete(' + Jdata[i].Emp_id + ')" /></td>  <td><input type="button" id="btnedit" value="Edit"  onclick="Edit(' + Jdata[i].Emp_id + ')" /></td</td></tr>');
                    }
                },
                error: function () {
                    alert("data not found");
                }
            });
        }
        function Delete(Emp_id) {
            $.ajax({
                url: 'EmployeeForm.asmx/EmployeeDelete',
                type: 'Post',
                contentType: 'application/Json;charset=utf-8',
                dataType: 'Json',
                data: "{DelEmp: '" + Emp_id+ "'}",
                success: function () {
                    Show();
                },
                error: function () {
                    alert('Data not deleted');
                }
            });
        }

        function Edit(Emp_id) {
            $.ajax({
                url:'EmployeeForm.asmx/EmployeeEdit',
                type:'Post',
                contentType:'application/charset=utf-8',
                dataType: 'Json',
                data: "{EmpEdt : '" + Emp_id + "'}",
                success: function (Jdata) {
                    Jdata = JSON.parse(Jdata.d);
                    $("#txtname").val(Jdata[0].Name);
                    $("#txtaddress").val(Jdata[0].Address);
                    $("#txtage").val(Jdata[0].age);
                    $("#btnsave").val("Update");
                },
                error: function(){
                    alert('Data not edited');
                },

            })
        }

    </script>
    <title></title>

</head>
<body>
    <div>
        <table>
            <tr>
                <td>Name</td>
                <td><input type="text" id="txtname" /></td>
            </tr>
            <tr>
                <td>Address</td>
                <td><input type="text" id="txtaddress" /></td>
            </tr>
            <tr>
                <td>Age</td>
                <td><input type="text" id="txtage" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="button" id="btnsave" value="Save" onclick="Insert()" /></td>
            </tr>
        </table>
        <table id="tbl" style="background-color:blue;color:white;width:600px">
            <tr style="background-color: blue" color:red;><td>Employee Id</td> <td>Employee Name</td> <td>Employee Address</td> <td>Employee Age</td></tr>
        </table>
    </div>

</body>
</html>